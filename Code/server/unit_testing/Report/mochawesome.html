<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:11,&quot;tests&quot;:68,&quot;passes&quot;:61,&quot;pending&quot;:0,&quot;failures&quot;:7,&quot;start&quot;:&quot;2024-12-01T16:54:32.326Z&quot;,&quot;end&quot;:&quot;2024-12-01T16:54:32.532Z&quot;,&quot;duration&quot;:206,&quot;testsRegistered&quot;:68,&quot;passPercent&quot;:89.70588235294117,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;62b8ff82-da4e-4ff9-9f70-3e8a59c4f4bc&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;title&quot;:&quot;addProduct Controller&quot;,&quot;fullFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\test_cases\\AddProductController\\addproduct.test.js&quot;,&quot;file&quot;:&quot;\\unit_testing\\test_cases\\AddProductController\\addproduct.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;addProduct Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller \&quot;before each\&quot; hook in \&quot;addProduct Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Mock request and response objects\nreq = {\n    body: {},\n};\nres = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.stub(),\n};\n// Stub Product save method\nproductStub = sinon.stub(Product.prototype, &#x27;save&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9def224b-05e9-41dd-9d4e-d0cd5c06692c&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;addProduct Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller \&quot;after each\&quot; hook in \&quot;addProduct Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bfedcd1-4774-4c36-b81f-3a15bb2517be&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if Product ID is missing&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 400 if Product ID is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    category: &#x27;Electronics&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nawait addProduct(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Product ID is required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2638491-0d90-4878-82d1-51f3d3d3a5b1&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if category is missing&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 400 if category is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nawait addProduct(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Category is required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfc3f7a6-902c-4d55-b0d4-539de54295bf&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should save product and return 200 if all fields are valid&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should save product and return 200 if all fields are valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    category: &#x27;Electronics&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nproductStub.resolves(); // Simulate successful save\nawait addProduct(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Product added successfully.&#x27;,\n    product: req.body,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;213c323e-f396-413c-aa7f-e81a3e04868e&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is a database error&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 500 if there is a database error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    category: &#x27;Electronics&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nproductStub.rejects(new Error(&#x27;Database error&#x27;)); // Simulate save failure\nawait addProduct(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Database error&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee721d36-28a0-470a-a41b-0d2ed4bd5b91&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if Product ID is missing&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 400 if Product ID is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    category: &#x27;Electronics&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nawait addProduct(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Product ID is required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ff52f5f-a79c-4260-b1ef-e2ad30b058a6&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should save product and return 200 if all fields are valid&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should save product and return 200 if all fields are valid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    category: &#x27;Electronics&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nproductStub.resolves(); // Simulate successful save\nawait addProduct(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Product added successfully.&#x27;,\n    product: req.body,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5777f5e0-6bd0-42a6-bc9b-5bda725df066&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if category is missing&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 400 if category is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nawait addProduct(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Category is required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82aa3570-574b-4149-906e-49ac0cd25097&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if Product URL is missing&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 400 if Product URL is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    category: &#x27;Electronics&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nawait addProduct(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Product URL is required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ee291a2-e099-4a14-a2d0-fca9df9cfe1c&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if Detail URL is missing&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 400 if Detail URL is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    category: &#x27;Electronics&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nawait addProduct(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Detail URL is required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f72cebc9-f562-4844-a839-1fa1274dbf2e&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if Product title is missing&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 400 if Product title is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    category: &#x27;Electronics&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nawait addProduct(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Product title is required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09386ec3-fda1-4698-88af-f699f369fdb6&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if Product price is missing&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 400 if Product price is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    category: &#x27;Electronics&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nawait addProduct(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Product price is required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;043a7e3a-58a4-44d1-9509-c3ba50dfd75b&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if Product quantity is missing&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 400 if Product quantity is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    category: &#x27;Electronics&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    description: &#x27;This is a sample product&#x27;,\n};\nawait addProduct(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Product quantity is required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ead7c73c-8355-41b3-b806-9d786f1d1615&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if Product description is missing&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 400 if Product description is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    category: &#x27;Electronics&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n};\nawait addProduct(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Product description is required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1323ca3f-eb16-43be-98d1-10dbcf637c3c&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is a database error&quot;,&quot;fullTitle&quot;:&quot;addProduct Controller should return 500 if there is a database error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    id: &#x27;12345&#x27;,\n    category: &#x27;Electronics&#x27;,\n    url: &#x27;http://example.com/product&#x27;,\n    detailUrl: &#x27;http://example.com/product/detail&#x27;,\n    title: { shortTitle: &#x27;Smartphone&#x27;, longTitle: &#x27;Latest Smartphone&#x27; },\n    price: { mrp: 15000, cost: 12000, discount: &#x27;20%&#x27; },\n    quantity: 100,\n    description: &#x27;This is a sample product&#x27;,\n};\nproductStub.rejects(new Error(&#x27;Database error&#x27;)); // Simulate save failure\nawait addProduct(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Database error&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48bf66aa-5791-45fc-872a-1efe3da7478f&quot;,&quot;parentUUID&quot;:&quot;006440fb-e8c5-4439-a4e8-5d792462e0e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d2638491-0d90-4878-82d1-51f3d3d3a5b1&quot;,&quot;dfc3f7a6-902c-4d55-b0d4-539de54295bf&quot;,&quot;213c323e-f396-413c-aa7f-e81a3e04868e&quot;,&quot;ee721d36-28a0-470a-a41b-0d2ed4bd5b91&quot;,&quot;0ff52f5f-a79c-4260-b1ef-e2ad30b058a6&quot;,&quot;5777f5e0-6bd0-42a6-bc9b-5bda725df066&quot;,&quot;82aa3570-574b-4149-906e-49ac0cd25097&quot;,&quot;1ee291a2-e099-4a14-a2d0-fca9df9cfe1c&quot;,&quot;f72cebc9-f562-4844-a839-1fa1274dbf2e&quot;,&quot;09386ec3-fda1-4698-88af-f699f369fdb6&quot;,&quot;043a7e3a-58a4-44d1-9509-c3ba50dfd75b&quot;,&quot;ead7c73c-8355-41b3-b806-9d786f1d1615&quot;,&quot;1323ca3f-eb16-43be-98d1-10dbcf637c3c&quot;,&quot;48bf66aa-5791-45fc-872a-1efe3da7478f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6efabe31-55b3-4a5f-9c5f-44a734160998&quot;,&quot;title&quot;:&quot;addToCart Controller&quot;,&quot;fullFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\test_cases\\CartController\\addtocart.test.js&quot;,&quot;file&quot;:&quot;\\unit_testing\\test_cases\\CartController\\addtocart.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;addToCart Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;addToCart Controller \&quot;before each\&quot; hook in \&quot;addToCart Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = { body: {} }; // Mock request object\nres = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.stub(),\n}; // Mock response object\nuserStub = sinon.stub(User, &#x27;findOne&#x27;); // Stub User.findOne\nproductStub = sinon.stub(Product, &#x27;findById&#x27;); // Stub Product.findById\nsaveStub = sinon.stub(); // Stub save method&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94b18bda-189e-4350-915e-ea603c1a213c&quot;,&quot;parentUUID&quot;:&quot;6efabe31-55b3-4a5f-9c5f-44a734160998&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;addToCart Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;addToCart Controller \&quot;after each\&quot; hook in \&quot;addToCart Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore(); // Restore original methods after each test&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0be10b18-0984-4c8b-94f9-9dd71499d62b&quot;,&quot;parentUUID&quot;:&quot;6efabe31-55b3-4a5f-9c5f-44a734160998&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if username or product ID is missing&quot;,&quot;fullTitle&quot;:&quot;addToCart Controller should return 400 if username or product ID is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { quantity: 2 }; // Missing username and product ID\nawait addToCart(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Username and Product ID are required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08ffb2c2-4879-4070-a375-df0055e5487a&quot;,&quot;parentUUID&quot;:&quot;6efabe31-55b3-4a5f-9c5f-44a734160998&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if user is not found&quot;,&quot;fullTitle&quot;:&quot;addToCart Controller should return 404 if user is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;nonexistentUser&#x27;, id: &#x27;12345&#x27;, quantity: 2 };\nuserStub.resolves(null); // Simulate user not found\nawait addToCart(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;User not found.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;018d6832-8aa6-44ef-8e4d-b6b5b33179e1&quot;,&quot;parentUUID&quot;:&quot;6efabe31-55b3-4a5f-9c5f-44a734160998&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if product is not found&quot;,&quot;fullTitle&quot;:&quot;addToCart Controller should return 404 if product is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27;, id: &#x27;12345&#x27;, quantity: 2 };\nuserStub.resolves({ cart: [] }); // User exists\nproductStub.resolves(null); // Product not found\nawait addToCart(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Product not found.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8201821b-f4f2-492a-ae4c-443706d54752&quot;,&quot;parentUUID&quot;:&quot;6efabe31-55b3-4a5f-9c5f-44a734160998&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the quantity if the product is already in the cart&quot;,&quot;fullTitle&quot;:&quot;addToCart Controller should update the quantity if the product is already in the cart&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27;, id: &#x27;12345&#x27;, quantity: 2 };\nconst user = {\n    cart: [{ productId: &#x27;12345&#x27;, quantity: 1 }],\n    save: saveStub,\n};\nuserStub.resolves(user); // User exists\nproductStub.resolves({ id: &#x27;12345&#x27; }); // Product exists\nawait addToCart(req, res);\nexpect(user.cart[0].quantity).to.equal(3); // Quantity updated\nexpect(saveStub.calledOnce).to.be.true; // User&#x27;s save method called\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Product added to cart successfully.&#x27;,\n    cart: user.cart,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;174a85b1-7bfe-49bb-86ed-91fb41c92c71&quot;,&quot;parentUUID&quot;:&quot;6efabe31-55b3-4a5f-9c5f-44a734160998&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add a new product to the cart if not already present&quot;,&quot;fullTitle&quot;:&quot;addToCart Controller should add a new product to the cart if not already present&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27;, id: &#x27;12345&#x27;, quantity: 2 };\nconst user = {\n    cart: [],\n    save: saveStub,\n};\nuserStub.resolves(user); // User exists\nproductStub.resolves({ id: &#x27;12345&#x27; }); // Product exists\nawait addToCart(req, res);\nexpect(user.cart.length).to.equal(1); // One item added\nexpect(user.cart[0]).to.deep.equal({ productId: &#x27;12345&#x27;, quantity: 2 }); // Correct product and quantity\nexpect(saveStub.calledOnce).to.be.true; // User&#x27;s save method called\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Product added to cart successfully.&#x27;,\n    cart: user.cart,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;313b7652-b694-41a1-a350-95ff1b66029c&quot;,&quot;parentUUID&quot;:&quot;6efabe31-55b3-4a5f-9c5f-44a734160998&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is a server error&quot;,&quot;fullTitle&quot;:&quot;addToCart Controller should return 500 if there is a server error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27;, id: &#x27;12345&#x27;, quantity: 2 };\nuserStub.rejects(new Error(&#x27;Database error&#x27;)); // Simulate database error\nawait addToCart(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Internal Server Error&#x27;,\n    error: &#x27;Database error&#x27;,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af4a4970-89a4-4f70-a02e-f2d7bb4e1a29&quot;,&quot;parentUUID&quot;:&quot;6efabe31-55b3-4a5f-9c5f-44a734160998&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;08ffb2c2-4879-4070-a375-df0055e5487a&quot;,&quot;018d6832-8aa6-44ef-8e4d-b6b5b33179e1&quot;,&quot;8201821b-f4f2-492a-ae4c-443706d54752&quot;,&quot;174a85b1-7bfe-49bb-86ed-91fb41c92c71&quot;,&quot;313b7652-b694-41a1-a350-95ff1b66029c&quot;,&quot;af4a4970-89a4-4f70-a02e-f2d7bb4e1a29&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e63c4272-cdf7-4004-b54c-50e53ac04188&quot;,&quot;title&quot;:&quot;clearCart Controller&quot;,&quot;fullFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\test_cases\\CartController\\clearcart.test.js&quot;,&quot;file&quot;:&quot;\\unit_testing\\test_cases\\CartController\\clearcart.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;clearCart Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;clearCart Controller \&quot;before each\&quot; hook in \&quot;clearCart Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = { body: {} };\nres = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.stub(),\n};\nuserStub = sinon.stub(User, &#x27;findOne&#x27;);\nsaveStub = sinon.stub();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;beabc96e-d4b9-4b34-a9be-a98a1ee08b37&quot;,&quot;parentUUID&quot;:&quot;e63c4272-cdf7-4004-b54c-50e53ac04188&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;clearCart Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;clearCart Controller \&quot;after each\&quot; hook in \&quot;clearCart Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4443c21-a7f7-46c3-818a-482f64fdf29d&quot;,&quot;parentUUID&quot;:&quot;e63c4272-cdf7-4004-b54c-50e53ac04188&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if username is missing&quot;,&quot;fullTitle&quot;:&quot;clearCart Controller should return 400 if username is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {}; // Missing username\nawait clearCart(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Username is required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a16e976-8bac-464c-903f-60fd8b3fbe0e&quot;,&quot;parentUUID&quot;:&quot;e63c4272-cdf7-4004-b54c-50e53ac04188&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if user is not found&quot;,&quot;fullTitle&quot;:&quot;clearCart Controller should return 404 if user is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;nonexistentUser&#x27; };\nuserStub.resolves(null); // User not found\nawait clearCart(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;User not found.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cce892e8-c8c6-4273-aa0c-7394216d34e9&quot;,&quot;parentUUID&quot;:&quot;e63c4272-cdf7-4004-b54c-50e53ac04188&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should clear the user cart successfully&quot;,&quot;fullTitle&quot;:&quot;clearCart Controller should clear the user cart successfully&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27; };\nconst existingUser = {\n    cart: [{ productId: &#x27;12345&#x27;, quantity: 2 }],\n    save: saveStub,\n};\nuserStub.resolves(existingUser); // User found\nawait clearCart(req, res);\nexpect(existingUser.cart).to.deep.equal([]); // Cart should be cleared\nexpect(saveStub.calledOnce).to.be.true; // User saved\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Cart cleared successfully.&#x27;,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23095748-2924-4f07-938d-787397a48204&quot;,&quot;parentUUID&quot;:&quot;e63c4272-cdf7-4004-b54c-50e53ac04188&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is a server error&quot;,&quot;fullTitle&quot;:&quot;clearCart Controller should return 500 if there is a server error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27; };\nuserStub.rejects(new Error(&#x27;Database error&#x27;)); // Simulate a database error\nawait clearCart(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Internal Server Error&#x27;,\n    error: &#x27;Database error&#x27;,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ec9b986-6549-4151-8614-706b830ac6e2&quot;,&quot;parentUUID&quot;:&quot;e63c4272-cdf7-4004-b54c-50e53ac04188&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0a16e976-8bac-464c-903f-60fd8b3fbe0e&quot;,&quot;cce892e8-c8c6-4273-aa0c-7394216d34e9&quot;,&quot;23095748-2924-4f07-938d-787397a48204&quot;,&quot;5ec9b986-6549-4151-8614-706b830ac6e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ecf542d4-1188-4922-ab70-c298801a981b&quot;,&quot;title&quot;:&quot;getCart Controller&quot;,&quot;fullFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\test_cases\\CartController\\getcart.test.js&quot;,&quot;file&quot;:&quot;\\unit_testing\\test_cases\\CartController\\getcart.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;getCart Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;getCart Controller \&quot;before each\&quot; hook in \&quot;getCart Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = { params: {} };\nres = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.stub(),\n};\nuserStub = sinon.stub(User, &#x27;findOne&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d44017a2-21af-4fd3-82d4-b34eec00d6dc&quot;,&quot;parentUUID&quot;:&quot;ecf542d4-1188-4922-ab70-c298801a981b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;getCart Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;getCart Controller \&quot;after each\&quot; hook in \&quot;getCart Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5af1eb73-5901-44c9-8260-79cb2027e1cc&quot;,&quot;parentUUID&quot;:&quot;ecf542d4-1188-4922-ab70-c298801a981b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 404 if user is not found&quot;,&quot;fullTitle&quot;:&quot;getCart Controller should return 404 if user is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { username: &#x27;nonexistentUser&#x27; };\nuserStub.resolves(null);\nawait getCart(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;User not found.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to be true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to be true\n    at Context.&lt;anonymous&gt; (file:///C:/LABs/Sem-5_SE_Project/Project/Software-Engineering-Project/Codes/server/unit_testing/test_cases/CartController/getcart.test.js:28:49)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;308ee86f-5285-4e78-9e86-d9e4443b2986&quot;,&quot;parentUUID&quot;:&quot;ecf542d4-1188-4922-ab70-c298801a981b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return the user cart if the user is found&quot;,&quot;fullTitle&quot;:&quot;getCart Controller should return the user cart if the user is found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { username: &#x27;existingUser&#x27; };\nconst userCart = [\n    { productId: { id: &#x27;12345&#x27;, title: { name: &#x27;Product 1&#x27; } }, quantity: 2 },\n    { productId: { id: &#x27;67890&#x27;, title: { name: &#x27;Product 2&#x27; } }, quantity: 1 },\n];\nconst user = {\n    username: &#x27;existingUser&#x27;,\n    cart: userCart,\n    populate: sinon.stub().resolvesThis(),\n};\nuserStub.resolves(user);\nawait getCart(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({ cart: userCart })).to.be.true;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to be true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to be true\n    at Context.&lt;anonymous&gt; (file:///C:/LABs/Sem-5_SE_Project/Project/Software-Engineering-Project/Codes/server/unit_testing/test_cases/CartController/getcart.test.js:49:49)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;d5efb4ef-56ca-4076-9650-a374c2707da5&quot;,&quot;parentUUID&quot;:&quot;ecf542d4-1188-4922-ab70-c298801a981b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is a server error&quot;,&quot;fullTitle&quot;:&quot;getCart Controller should return 500 if there is a server error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params = { username: &#x27;existingUser&#x27; };\nuserStub.rejects(new Error(&#x27;Database error&#x27;));\nawait getCart(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Internal Server Error&#x27;,\n    error: &#x27;Database error&#x27;,\n})).to.be.true;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to be true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to be true\n    at Context.&lt;anonymous&gt; (file:///C:/LABs/Sem-5_SE_Project/Project/Software-Engineering-Project/Codes/server/unit_testing/test_cases/CartController/getcart.test.js:63:18)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;f576008a-d748-4901-bfe7-5e9affef4ec7&quot;,&quot;parentUUID&quot;:&quot;ecf542d4-1188-4922-ab70-c298801a981b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;308ee86f-5285-4e78-9e86-d9e4443b2986&quot;,&quot;d5efb4ef-56ca-4076-9650-a374c2707da5&quot;,&quot;f576008a-d748-4901-bfe7-5e9affef4ec7&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c4e34a6a-f748-4d26-a489-895b6187c703&quot;,&quot;title&quot;:&quot;removeFromCart Controller&quot;,&quot;fullFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\test_cases\\CartController\\removefromcart.test.js&quot;,&quot;file&quot;:&quot;\\unit_testing\\test_cases\\CartController\\removefromcart.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;removeFromCart Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;removeFromCart Controller \&quot;before each\&quot; hook in \&quot;removeFromCart Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = { body: {} };\nres = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.stub(),\n};\nuserStub = sinon.stub(User, &#x27;findOne&#x27;);\nsaveStub = sinon.stub();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;354b9e8a-d7f7-4578-940b-2ca12faec63b&quot;,&quot;parentUUID&quot;:&quot;c4e34a6a-f748-4d26-a489-895b6187c703&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;removeFromCart Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;removeFromCart Controller \&quot;after each\&quot; hook in \&quot;removeFromCart Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e68e3ee3-2b76-4d4b-94fb-7fb08dd37ef2&quot;,&quot;parentUUID&quot;:&quot;c4e34a6a-f748-4d26-a489-895b6187c703&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if username or product ID is missing&quot;,&quot;fullTitle&quot;:&quot;removeFromCart Controller should return 400 if username or product ID is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;testUser&#x27; }; // Missing id\nawait removeFromCart(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Username and Product ID are required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c8677a0-da53-44c4-ad6a-488e45d2b84d&quot;,&quot;parentUUID&quot;:&quot;c4e34a6a-f748-4d26-a489-895b6187c703&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if user is not found&quot;,&quot;fullTitle&quot;:&quot;removeFromCart Controller should return 404 if user is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;nonexistentUser&#x27;, id: &#x27;12345&#x27; };\nuserStub.resolves(null); // User not found\nawait removeFromCart(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;User not found.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7dbaba1-7b14-423e-b81f-53cf08732299&quot;,&quot;parentUUID&quot;:&quot;c4e34a6a-f748-4d26-a489-895b6187c703&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should remove the product from the cart if it exists&quot;,&quot;fullTitle&quot;:&quot;removeFromCart Controller should remove the product from the cart if it exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27;, id: &#x27;12345&#x27; };\nconst existingUser = {\n    cart: [{ productId: &#x27;12345&#x27;, quantity: 2 }, { productId: &#x27;67890&#x27;, quantity: 1 }],\n    save: saveStub,\n};\nuserStub.resolves(existingUser);\nawait removeFromCart(req, res);\nexpect(existingUser.cart).to.deep.equal([{ productId: &#x27;67890&#x27;, quantity: 1 }]); // Product removed\nexpect(saveStub.calledOnce).to.be.true; // User saved\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Product removed from cart.&#x27;,\n    cart: existingUser.cart,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f048752-205f-4779-8ebf-92c4cb3f80f5&quot;,&quot;parentUUID&quot;:&quot;c4e34a6a-f748-4d26-a489-895b6187c703&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should do nothing if the product is not in the cart&quot;,&quot;fullTitle&quot;:&quot;removeFromCart Controller should do nothing if the product is not in the cart&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27;, id: &#x27;99999&#x27; }; // Product not in cart\nconst existingUser = {\n    cart: [{ productId: &#x27;12345&#x27;, quantity: 2 }],\n    save: saveStub,\n};\nuserStub.resolves(existingUser);\nawait removeFromCart(req, res);\nexpect(existingUser.cart).to.deep.equal([{ productId: &#x27;12345&#x27;, quantity: 2 }]); // Cart remains the same\nexpect(saveStub.calledOnce).to.be.true; // User saved\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Product removed from cart.&#x27;,\n    cart: existingUser.cart,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07526980-f94d-4160-864a-6de0dcc6b842&quot;,&quot;parentUUID&quot;:&quot;c4e34a6a-f748-4d26-a489-895b6187c703&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is a server error&quot;,&quot;fullTitle&quot;:&quot;removeFromCart Controller should return 500 if there is a server error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27;, id: &#x27;12345&#x27; };\nuserStub.rejects(new Error(&#x27;Database error&#x27;)); // Simulate a database error\nawait removeFromCart(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Internal Server Error&#x27;,\n    error: &#x27;Database error&#x27;,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23fb1758-6f05-4dbd-b0c6-a6bcb0b9e3d6&quot;,&quot;parentUUID&quot;:&quot;c4e34a6a-f748-4d26-a489-895b6187c703&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c8677a0-da53-44c4-ad6a-488e45d2b84d&quot;,&quot;c7dbaba1-7b14-423e-b81f-53cf08732299&quot;,&quot;3f048752-205f-4779-8ebf-92c4cb3f80f5&quot;,&quot;07526980-f94d-4160-864a-6de0dcc6b842&quot;,&quot;23fb1758-6f05-4dbd-b0c6-a6bcb0b9e3d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;73f48987-2b02-41a9-b297-d713a234b917&quot;,&quot;title&quot;:&quot;updateCartItem Controller&quot;,&quot;fullFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\test_cases\\CartController\\updatecartitem.test.js&quot;,&quot;file&quot;:&quot;\\unit_testing\\test_cases\\CartController\\updatecartitem.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;updateCartItem Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;updateCartItem Controller \&quot;before each\&quot; hook in \&quot;updateCartItem Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = { body: {} };\nres = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.stub(),\n};\nuserStub = sinon.stub(User, &#x27;findOne&#x27;);\nsaveStub = sinon.stub();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2da84e0f-ad5a-4ecc-88c3-b0bb5b11ec03&quot;,&quot;parentUUID&quot;:&quot;73f48987-2b02-41a9-b297-d713a234b917&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;updateCartItem Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;updateCartItem Controller \&quot;after each\&quot; hook in \&quot;updateCartItem Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b085e141-e77f-4c28-90b8-c642de99abd5&quot;,&quot;parentUUID&quot;:&quot;73f48987-2b02-41a9-b297-d713a234b917&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if username, product ID, or quantity is missing&quot;,&quot;fullTitle&quot;:&quot;updateCartItem Controller should return 400 if username, product ID, or quantity is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;testUser&#x27;, id: &#x27;12345&#x27; }; // Missing quantity\nawait updateCartItem(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Username, Product ID, and quantity are required.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2f6d266-960c-405b-864f-1d3c65d9c54e&quot;,&quot;parentUUID&quot;:&quot;73f48987-2b02-41a9-b297-d713a234b917&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if user is not found&quot;,&quot;fullTitle&quot;:&quot;updateCartItem Controller should return 404 if user is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;nonexistentUser&#x27;, id: &#x27;12345&#x27;, quantity: 2 };\nuserStub.resolves(null); // User not found\nawait updateCartItem(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;User not found.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cf136dd-9cca-4ff0-98d9-9111064dddd8&quot;,&quot;parentUUID&quot;:&quot;73f48987-2b02-41a9-b297-d713a234b917&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if product is not found in cart&quot;,&quot;fullTitle&quot;:&quot;updateCartItem Controller should return 404 if product is not found in cart&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27;, id: &#x27;67890&#x27;, quantity: 3 };\nconst existingUser = {\n    cart: [{ productId: &#x27;12345&#x27;, quantity: 2 }], // Product not in cart\n    save: saveStub,\n};\nuserStub.resolves(existingUser);\nawait updateCartItem(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Product not found in cart.&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa07d025-d49b-41bb-b9cc-b6f5309342cf&quot;,&quot;parentUUID&quot;:&quot;73f48987-2b02-41a9-b297-d713a234b917&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update the product quantity in the cart if it exists&quot;,&quot;fullTitle&quot;:&quot;updateCartItem Controller should update the product quantity in the cart if it exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27;, id: &#x27;12345&#x27;, quantity: 5 };\nconst existingUser = {\n    cart: [{ productId: &#x27;12345&#x27;, quantity: 2 }],\n    save: saveStub,\n};\nuserStub.resolves(existingUser);\nawait updateCartItem(req, res);\nexpect(existingUser.cart[0].quantity).to.equal(5); // Quantity updated\nexpect(saveStub.calledOnce).to.be.true; // User saved\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Cart updated successfully.&#x27;,\n    cart: existingUser.cart,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13b22df9-8981-46ac-ad2c-a3207a324320&quot;,&quot;parentUUID&quot;:&quot;73f48987-2b02-41a9-b297-d713a234b917&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is a server error&quot;,&quot;fullTitle&quot;:&quot;updateCartItem Controller should return 500 if there is a server error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = { username: &#x27;existingUser&#x27;, id: &#x27;12345&#x27;, quantity: 2 };\nuserStub.rejects(new Error(&#x27;Database error&#x27;)); // Simulate a database error\nawait updateCartItem(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({\n    message: &#x27;Internal Server Error&#x27;,\n    error: &#x27;Database error&#x27;,\n})).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9206ab84-579d-4a27-92c9-e31cac34593e&quot;,&quot;parentUUID&quot;:&quot;73f48987-2b02-41a9-b297-d713a234b917&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e2f6d266-960c-405b-864f-1d3c65d9c54e&quot;,&quot;9cf136dd-9cca-4ff0-98d9-9111064dddd8&quot;,&quot;fa07d025-d49b-41bb-b9cc-b6f5309342cf&quot;,&quot;13b22df9-8981-46ac-ad2c-a3207a324320&quot;,&quot;9206ab84-579d-4a27-92c9-e31cac34593e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0374b87d-3d20-46d4-b6fd-5782aeddbda3&quot;,&quot;title&quot;:&quot;getreviews Controller&quot;,&quot;fullFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\test_cases\\get_submit_ReviewController\\getreview.test.js&quot;,&quot;file&quot;:&quot;\\unit_testing\\test_cases\\get_submit_ReviewController\\getreview.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;getreviews Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;getreviews Controller \&quot;before each\&quot; hook in \&quot;getreviews Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Mock the request object\nreq = {\n    params: {\n        productId: &#x27;12345&#x27;,  // Ensure productId is correctly set\n    }\n};\n// Mock the response object\nres = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.stub().returnsThis(),\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;526655d7-8ffa-4c2b-8647-88e683f03085&quot;,&quot;parentUUID&quot;:&quot;0374b87d-3d20-46d4-b6fd-5782aeddbda3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;getreviews Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;getreviews Controller \&quot;after each\&quot; hook in \&quot;getreviews Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab04f96a-61d7-4a7d-8a1c-1f7e8e57832a&quot;,&quot;parentUUID&quot;:&quot;0374b87d-3d20-46d4-b6fd-5782aeddbda3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if productId is missing in params&quot;,&quot;fullTitle&quot;:&quot;getreviews Controller should return 400 if productId is missing in params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.productId = undefined;  // Simulate missing productId\nawait getreviews(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Product ID is required&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10ccefd9-8fa9-4180-9e7c-4c07e8e3e372&quot;,&quot;parentUUID&quot;:&quot;0374b87d-3d20-46d4-b6fd-5782aeddbda3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is a database error&quot;,&quot;fullTitle&quot;:&quot;getreviews Controller should return 500 if there is a database error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Simulate a database error\nfindStub = sinon.stub(Review, &#x27;find&#x27;).throws(new Error(&#x27;Database error&#x27;));\nawait getreviews(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Error fetching reviews&#x27;, error: &#x27;Database error&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6a4dd4e-f5e8-4115-a18c-6c967ee61dbc&quot;,&quot;parentUUID&quot;:&quot;0374b87d-3d20-46d4-b6fd-5782aeddbda3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 200 and reviews if productId exists and reviews are found&quot;,&quot;fullTitle&quot;:&quot;getreviews Controller should return 200 and reviews if productId exists and reviews are found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const reviews = [\n    { productId: &#x27;12345&#x27;, rating: &#x27;5&#x27;, reviewText: &#x27;Great!&#x27;, date: new Date(&#x27;2022-01-01&#x27;) },\n    { productId: &#x27;12345&#x27;, rating: &#x27;4&#x27;, reviewText: &#x27;Good!&#x27;, date: new Date(&#x27;2022-02-01&#x27;) },\n];\n// Stub the Review.find() method to return mock data\nfindStub = sinon.stub(Review, &#x27;find&#x27;).returns(Promise.resolve(reviews));\nawait getreviews(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(reviews)).to.be.true;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to be true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to be true\n    at Context.&lt;anonymous&gt; (file:///C:/LABs/Sem-5_SE_Project/Project/Software-Engineering-Project/Codes/server/unit_testing/test_cases/get_submit_ReviewController/getreview.test.js:58:49)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;1ba4894f-a12e-4acd-9e28-8fd2cb837af6&quot;,&quot;parentUUID&quot;:&quot;0374b87d-3d20-46d4-b6fd-5782aeddbda3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 200 and an empty array if no reviews are found for the productId&quot;,&quot;fullTitle&quot;:&quot;getreviews Controller should return 200 and an empty array if no reviews are found for the productId&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const reviews = [];\n// Stub the Review.find() method to return an empty array\nfindStub = sinon.stub(Review, &#x27;find&#x27;).returns(Promise.resolve(reviews));\nawait getreviews(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(reviews)).to.be.true;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to be true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to be true\n    at Context.&lt;anonymous&gt; (file:///C:/LABs/Sem-5_SE_Project/Project/Software-Engineering-Project/Codes/server/unit_testing/test_cases/get_submit_ReviewController/getreview.test.js:70:49)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;7c37fd0c-5718-4fbc-921b-9004418a03a2&quot;,&quot;parentUUID&quot;:&quot;0374b87d-3d20-46d4-b6fd-5782aeddbda3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if productId is missing in params&quot;,&quot;fullTitle&quot;:&quot;getreviews Controller should return 400 if productId is missing in params&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.productId = undefined;  // Simulate missing productId\nawait getreviews(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Product ID is required&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c8ae44d-2a2d-4e11-bca6-8d19b7e60151&quot;,&quot;parentUUID&quot;:&quot;0374b87d-3d20-46d4-b6fd-5782aeddbda3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is a database error&quot;,&quot;fullTitle&quot;:&quot;getreviews Controller should return 500 if there is a database error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Simulate a database error\nfindStub = sinon.stub(Review, &#x27;find&#x27;).throws(new Error(&#x27;Database error&#x27;));\nawait getreviews(req, res);\nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Error fetching reviews&#x27;, error: &#x27;Database error&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc17150b-dd21-4787-badb-3dd1267648d0&quot;,&quot;parentUUID&quot;:&quot;0374b87d-3d20-46d4-b6fd-5782aeddbda3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 200 and sorted reviews by date in descending order&quot;,&quot;fullTitle&quot;:&quot;getreviews Controller should return 200 and sorted reviews by date in descending order&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;const reviews = [\n    { productId: &#x27;12345&#x27;, rating: &#x27;5&#x27;, reviewText: &#x27;Great product!&#x27;, date: new Date(&#x27;2023-02-01&#x27;) },\n    { productId: &#x27;12345&#x27;, rating: &#x27;4&#x27;, reviewText: &#x27;Good product.&#x27;, date: new Date(&#x27;2023-01-01&#x27;) },\n];\n// Stub the Review.find() method to return sorted reviews by date\nfindStub = sinon.stub(Review, &#x27;find&#x27;).returns(Promise.resolve(reviews));\nawait getreviews(req, res);\n// Verify if the reviews are sorted by date descending (most recent first)\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(reviews)).to.be.true;\nexpect(reviews[0].date).to.be.greaterThan(reviews[1].date);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to be true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to be true\n    at Context.&lt;anonymous&gt; (file:///C:/LABs/Sem-5_SE_Project/Project/Software-Engineering-Project/Codes/server/unit_testing/test_cases/get_submit_ReviewController/getreview.test.js:105:49)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;996f45b9-a962-4ea1-b6b3-7c5db47b542b&quot;,&quot;parentUUID&quot;:&quot;0374b87d-3d20-46d4-b6fd-5782aeddbda3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if no reviews are found for a non-existent productId&quot;,&quot;fullTitle&quot;:&quot;getreviews Controller should return 404 if no reviews are found for a non-existent productId&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.params.productId = &#x27;non-existent-product-id&#x27;;  // Simulate a non-existent productId\nconst reviews = [];\n// Stub the Review.find() method to return an empty array\nfindStub = sinon.stub(Review, &#x27;find&#x27;).returns(Promise.resolve(reviews));\nawait getreviews(req, res);\nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;No reviews found for this product&#x27; })).to.be.true;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to be true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to be true\n    at Context.&lt;anonymous&gt; (file:///C:/LABs/Sem-5_SE_Project/Project/Software-Engineering-Project/Codes/server/unit_testing/test_cases/get_submit_ReviewController/getreview.test.js:120:49)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;e19547e6-e618-4450-b5e1-f8d17ede5b21&quot;,&quot;parentUUID&quot;:&quot;0374b87d-3d20-46d4-b6fd-5782aeddbda3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10ccefd9-8fa9-4180-9e7c-4c07e8e3e372&quot;,&quot;e6a4dd4e-f5e8-4115-a18c-6c967ee61dbc&quot;,&quot;3c8ae44d-2a2d-4e11-bca6-8d19b7e60151&quot;,&quot;fc17150b-dd21-4787-badb-3dd1267648d0&quot;],&quot;failures&quot;:[&quot;1ba4894f-a12e-4acd-9e28-8fd2cb837af6&quot;,&quot;7c37fd0c-5718-4fbc-921b-9004418a03a2&quot;,&quot;996f45b9-a962-4ea1-b6b3-7c5db47b542b&quot;,&quot;e19547e6-e618-4450-b5e1-f8d17ede5b21&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;df772bbf-6341-47f0-a80d-abacf7d734e0&quot;,&quot;title&quot;:&quot;submitReview Controller&quot;,&quot;fullFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\test_cases\\get_submit_ReviewController\\submitreview.test.js&quot;,&quot;file&quot;:&quot;\\unit_testing\\test_cases\\get_submit_ReviewController\\submitreview.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;submitReview Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;submitReview Controller \&quot;before each\&quot; hook in \&quot;submitReview Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req = { body: {} };\nres = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.stub(),\n};\nsaveStub = sinon.stub();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;983d4ccf-82a9-4b7c-bcde-db79718f31fb&quot;,&quot;parentUUID&quot;:&quot;df772bbf-6341-47f0-a80d-abacf7d734e0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;submitReview Controller\&quot;&quot;,&quot;fullTitle&quot;:&quot;submitReview Controller \&quot;after each\&quot; hook in \&quot;submitReview Controller\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d89f193-d3cd-466d-a7ca-eea49f938ec8&quot;,&quot;parentUUID&quot;:&quot;df772bbf-6341-47f0-a80d-abacf7d734e0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return 400 if rating is missing&quot;,&quot;fullTitle&quot;:&quot;submitReview Controller should return 400 if rating is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    productId: &#x27;12345&#x27;,\n    reviewText: &#x27;Nice product!&#x27;,\n}; // Missing rating\nawait submitReview(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Missing required fields&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48f61ea7-fa92-4251-9834-3c86083f5108&quot;,&quot;parentUUID&quot;:&quot;df772bbf-6341-47f0-a80d-abacf7d734e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if reviewText is missing&quot;,&quot;fullTitle&quot;:&quot;submitReview Controller should return 400 if reviewText is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    productId: &#x27;12345&#x27;,\n    rating: &#x27;5&#x27;, // Rating is present as a string\n}; // Missing reviewText\nawait submitReview(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Missing required fields&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b253a029-c5de-4442-ac50-56e0518fa15c&quot;,&quot;parentUUID&quot;:&quot;df772bbf-6341-47f0-a80d-abacf7d734e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if productId is missing&quot;,&quot;fullTitle&quot;:&quot;submitReview Controller should return 400 if productId is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    rating: &#x27;5&#x27;, // Valid rating\n    reviewText: &#x27;Amazing!&#x27;,\n}; // Missing productId\nawait submitReview(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Missing required fields&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39a88d59-7140-44cc-8ae7-46a131adbd67&quot;,&quot;parentUUID&quot;:&quot;df772bbf-6341-47f0-a80d-abacf7d734e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if rating is outside allowed range&quot;,&quot;fullTitle&quot;:&quot;submitReview Controller should return 400 if rating is outside allowed range&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    productId: &#x27;12345&#x27;,\n    rating: &#x27;6&#x27;,  // invalid rating (greater than 5)\n    reviewText: &#x27;Good product!&#x27;\n};\nawait submitReview(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Rating must be a number between 1 and 5&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cb00a48-aead-47a9-9308-f8b570fdf063&quot;,&quot;parentUUID&quot;:&quot;df772bbf-6341-47f0-a80d-abacf7d734e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if rating is less than the allowed range&quot;,&quot;fullTitle&quot;:&quot;submitReview Controller should return 400 if rating is less than the allowed range&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;req.body = {\n    productId: &#x27;12345&#x27;,\n    rating: &#x27;0&#x27;,  // invalid rating (less than 1)\n    reviewText: &#x27;Terrible product!&#x27;\n};\nawait submitReview(req, res);\nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Rating must be a number between 1 and 5&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c2be99b-10c6-4be4-aa9d-6ae9f1b55c18&quot;,&quot;parentUUID&quot;:&quot;df772bbf-6341-47f0-a80d-abacf7d734e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;48f61ea7-fa92-4251-9834-3c86083f5108&quot;,&quot;b253a029-c5de-4442-ac50-56e0518fa15c&quot;,&quot;39a88d59-7140-44cc-8ae7-46a131adbd67&quot;,&quot;7cb00a48-aead-47a9-9308-f8b570fdf063&quot;,&quot;9c2be99b-10c6-4be4-aa9d-6ae9f1b55c18&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;title&quot;:&quot;getProducts&quot;,&quot;fullFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\test_cases\\ProductController\\getproduct.test.js&quot;,&quot;file&quot;:&quot;\\unit_testing\\test_cases\\ProductController\\getproduct.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return all products when no category is provided&quot;,&quot;fullTitle&quot;:&quot;getProducts should return all products when no category is provided&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeProducts = [\n    { id: &#x27;1&#x27;, category: &#x27;electronics&#x27;, title: &#x27;Product 1&#x27;, price: { amount: 100 } },\n    { id: &#x27;2&#x27;, category: &#x27;clothing&#x27;, title: &#x27;Product 2&#x27;, price: { amount: 50 } },\n];\nconst req = { query: {} };  // No category filter\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\nsinon.stub(Product, &#x27;find&#x27;).resolves(fakeProducts);\nawait getProducts(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeProducts)).to.be.true;\nProduct.find.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d4b099f-98ca-4b2f-b2c9-46243883b7d1&quot;,&quot;parentUUID&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return products filtered by category&quot;,&quot;fullTitle&quot;:&quot;getProducts should return products filtered by category&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeProducts = [\n    { id: &#x27;1&#x27;, category: &#x27;electronics&#x27;, title: &#x27;Product 1&#x27;, price: { amount: 100 } },\n    { id: &#x27;2&#x27;, category: &#x27;electronics&#x27;, title: &#x27;Product 2&#x27;, price: { amount: 200 } },\n];\n    \nconst req = { query: { category: &#x27;electronics&#x27; } };  // Category filter\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(Product, &#x27;find&#x27;).resolves(fakeProducts);\n    \nawait getProducts(req, res);\n    \nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeProducts)).to.be.true;\n    \nProduct.find.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0f8f2c5-42d3-45c2-a928-6949d8ec3108&quot;,&quot;parentUUID&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an empty array if no products match the category&quot;,&quot;fullTitle&quot;:&quot;getProducts should return an empty array if no products match the category&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeProducts = [];\n    \nconst req = { query: { category: &#x27;nonexistent-category&#x27; } };  // No matching category\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(Product, &#x27;find&#x27;).resolves(fakeProducts);\n    \nawait getProducts(req, res);\n    \nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeProducts)).to.be.true;\n    \nProduct.find.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6fb9ed3-775e-44ea-b58d-e2ce145a09a6&quot;,&quot;parentUUID&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is a server error&quot;,&quot;fullTitle&quot;:&quot;getProducts should return 500 if there is a server error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { query: { category: &#x27;electronics&#x27; } };\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(Product, &#x27;find&#x27;).throws(new Error(&#x27;Database error&#x27;));  // Simulate a DB error\n    \nawait getProducts(req, res);\n    \nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Database error&#x27; })).to.be.true;\n    \nProduct.find.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;003d6f70-c63b-48c8-957d-4058e5cf06ea&quot;,&quot;parentUUID&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return product with optional fields&quot;,&quot;fullTitle&quot;:&quot;getProducts should return product with optional fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeProduct = {\n    id: &#x27;1&#x27;,\n    category: &#x27;electronics&#x27;,\n    url: &#x27;http://example.com/product1&#x27;,\n    detailUrl: &#x27;http://example.com/product1/detail&#x27;,\n    title: { en: &#x27;Product 1&#x27; },\n    price: { amount: 100, currency: &#x27;USD&#x27; },\n    quantity: 10,\n    description: &#x27;Great product&#x27;,\n    discount: &#x27;10%&#x27;,\n    tagline: &#x27;Best in class&#x27;,\n};\n    \nconst req = { query: { category: &#x27;electronics&#x27; } };\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(Product, &#x27;find&#x27;).resolves([fakeProduct]);\n    \nawait getProducts(req, res);\n    \nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith([fakeProduct])).to.be.true;\n    \nProduct.find.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45899a67-ec77-4953-bef3-c536143f1a0b&quot;,&quot;parentUUID&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle special characters in category filter&quot;,&quot;fullTitle&quot;:&quot;getProducts should handle special characters in category filter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeProduct = {\n    id: &#x27;1&#x27;,\n    category: &#x27;electronics/smartphones&#x27;,\n    title: &#x27;Smartphone 1&#x27;,\n    price: { amount: 200 },\n};\n    \nconst req = { query: { category: &#x27;electronics/smartphones&#x27; } };\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(Product, &#x27;find&#x27;).resolves([fakeProduct]);\n    \nawait getProducts(req, res);\n    \nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith([fakeProduct])).to.be.true;\n    \nProduct.find.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c12ab5a5-b11a-4128-877b-d66c0483d496&quot;,&quot;parentUUID&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an empty array if no products are found&quot;,&quot;fullTitle&quot;:&quot;getProducts should return an empty array if no products are found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { query: {} };  // No category filter\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(Product, &#x27;find&#x27;).resolves([]);  // No products in the DB\n    \nawait getProducts(req, res);\n    \nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith([])).to.be.true;\n    \nProduct.find.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64be078b-96aa-4c29-a319-232fc0b17b64&quot;,&quot;parentUUID&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return an empty array for invalid category&quot;,&quot;fullTitle&quot;:&quot;getProducts should return an empty array for invalid category&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { query: { category: &#x27;nonexistent-category&#x27; } };  // Invalid category filter\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(Product, &#x27;find&#x27;).resolves([]);  // No products in the DB matching the category\n    \nawait getProducts(req, res);\n    \nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith([])).to.be.true;\n    \nProduct.find.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7378a765-b5cd-4210-b3ef-9c4753750df5&quot;,&quot;parentUUID&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is an error in the database query&quot;,&quot;fullTitle&quot;:&quot;getProducts should return 500 if there is an error in the database query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { query: { category: &#x27;electronics&#x27; } };\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(Product, &#x27;find&#x27;).throws(new Error(&#x27;Database connection error&#x27;));  // Simulate DB error\n    \nawait getProducts(req, res);\n    \nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Database connection error&#x27; })).to.be.true;\n    \nProduct.find.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc0c513c-479c-4d4a-98fe-0b60f4118e4f&quot;,&quot;parentUUID&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return products for a numeric category filter&quot;,&quot;fullTitle&quot;:&quot;getProducts should return products for a numeric category filter&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeProduct = { id: &#x27;1&#x27;, category: &#x27;123&#x27;, title: &#x27;Product 1&#x27;, price: { amount: 100 } };\n    \nconst req = { query: { category: &#x27;123&#x27; } };  // Numeric category filter\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(Product, &#x27;find&#x27;).resolves([fakeProduct]);\n    \nawait getProducts(req, res);\n    \nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith([fakeProduct])).to.be.true;\n    \nProduct.find.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68349a0c-d5c4-40ef-81a6-c279e48bb11e&quot;,&quot;parentUUID&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return all products if the category filter is an empty string&quot;,&quot;fullTitle&quot;:&quot;getProducts should return all products if the category filter is an empty string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeProducts = [\n    { id: &#x27;1&#x27;, category: &#x27;electronics&#x27;, title: &#x27;Product 1&#x27;, price: { amount: 100 } },\n    { id: &#x27;2&#x27;, category: &#x27;clothing&#x27;, title: &#x27;Product 2&#x27;, price: { amount: 50 } },\n];\n    \nconst req = { query: { category: &#x27;&#x27; } };  // Empty category filter\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(Product, &#x27;find&#x27;).resolves(fakeProducts);\n    \nawait getProducts(req, res);\n    \nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith(fakeProducts)).to.be.true;\n    \nProduct.find.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b1334f0-fec5-4b10-a205-fc2ff4dac02c&quot;,&quot;parentUUID&quot;:&quot;951bd74c-25e1-46ce-ba61-23dfdb0c0607&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2d4b099f-98ca-4b2f-b2c9-46243883b7d1&quot;,&quot;d0f8f2c5-42d3-45c2-a928-6949d8ec3108&quot;,&quot;a6fb9ed3-775e-44ea-b58d-e2ce145a09a6&quot;,&quot;003d6f70-c63b-48c8-957d-4058e5cf06ea&quot;,&quot;45899a67-ec77-4953-bef3-c536143f1a0b&quot;,&quot;c12ab5a5-b11a-4128-877b-d66c0483d496&quot;,&quot;64be078b-96aa-4c29-a319-232fc0b17b64&quot;,&quot;7378a765-b5cd-4210-b3ef-9c4753750df5&quot;,&quot;cc0c513c-479c-4d4a-98fe-0b60f4118e4f&quot;,&quot;68349a0c-d5c4-40ef-81a6-c279e48bb11e&quot;,&quot;4b1334f0-fec5-4b10-a205-fc2ff4dac02c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8b9000c4-ec1a-4927-b134-d2a9c202bd42&quot;,&quot;title&quot;:&quot;getProductById&quot;,&quot;fullFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\test_cases\\ProductController\\getproductbyid.test.js&quot;,&quot;file&quot;:&quot;\\unit_testing\\test_cases\\ProductController\\getproductbyid.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;getProductById\&quot;&quot;,&quot;fullTitle&quot;:&quot;getProductById \&quot;after each\&quot; hook in \&quot;getProductById\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;sinon.restore(); // Restore all the stubs after each test&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8c12e50-a532-4d53-b82d-c19f0cc11e70&quot;,&quot;parentUUID&quot;:&quot;8b9000c4-ec1a-4927-b134-d2a9c202bd42&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a product when a valid ID is passed&quot;,&quot;fullTitle&quot;:&quot;getProductById should return a product when a valid ID is passed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const mockProduct = {\n    id: &#x27;123&#x27;,\n    category: &#x27;electronics&#x27;,\n    title: { name: &#x27;Product Name&#x27; },\n    price: { amount: 100 },\n    quantity: 10,\n    description: &#x27;Product description&#x27;,\n    discount: &#x27;10%&#x27;,\n    tagline: &#x27;Best deal&#x27;\n};\n// Stub Product.findOne to return mockProduct\nsinon.stub(Product, &#x27;findOne&#x27;).resolves(mockProduct);\nconst request = { params: { id: &#x27;123&#x27; } };\nconst response = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.spy()\n};\nawait getProductById(request, response);\nexpect(Product.findOne.calledOnce).to.be.true;\nexpect(response.status.calledWith(200)).to.be.true;\nexpect(response.json.calledWith(mockProduct)).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e1091f9-1b8e-45c5-a1a2-efffde5df2d6&quot;,&quot;parentUUID&quot;:&quot;8b9000c4-ec1a-4927-b134-d2a9c202bd42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a 404 status if product is not found&quot;,&quot;fullTitle&quot;:&quot;getProductById should return a 404 status if product is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// Stub Product.findOne to return null (no product found)\nsinon.stub(Product, &#x27;findOne&#x27;).resolves(null);\nconst request = { params: { id: &#x27;nonexistent&#x27; } };\nconst response = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.spy()\n};\nawait getProductById(request, response);\nexpect(Product.findOne.calledOnce).to.be.true;\nexpect(response.status.calledWith(404)).to.be.true;\nexpect(response.json.calledWith({ message: &#x27;Product not found&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fb72cc7-2a4c-4bab-9d7f-c0dcd4ae16e7&quot;,&quot;parentUUID&quot;:&quot;8b9000c4-ec1a-4927-b134-d2a9c202bd42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should handle errors and return a 500 status&quot;,&quot;fullTitle&quot;:&quot;getProductById should handle errors and return a 500 status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const errorMessage = &#x27;Database error&#x27;;\n// Stub Product.findOne to simulate an error\nsinon.stub(Product, &#x27;findOne&#x27;).rejects(new Error(errorMessage));\nconst request = { params: { id: &#x27;123&#x27; } };\nconst response = {\n    status: sinon.stub().returnsThis(),\n    json: sinon.spy()\n};\nawait getProductById(request, response);\nexpect(Product.findOne.calledOnce).to.be.true;\nexpect(response.status.calledWith(500)).to.be.true;\nexpect(response.json.calledWith({ message: errorMessage })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4151a2ee-f26a-4de1-a398-798e3f264075&quot;,&quot;parentUUID&quot;:&quot;8b9000c4-ec1a-4927-b134-d2a9c202bd42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5e1091f9-1b8e-45c5-a1a2-efffde5df2d6&quot;,&quot;9fb72cc7-2a4c-4bab-9d7f-c0dcd4ae16e7&quot;,&quot;4151a2ee-f26a-4de1-a398-798e3f264075&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5aecd9f4-e96f-4a2f-9773-a44dd9dc8aae&quot;,&quot;title&quot;:&quot;getUserProfile function&quot;,&quot;fullFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\test_cases\\UserProfileController\\userprofile.test.js&quot;,&quot;file&quot;:&quot;\\unit_testing\\test_cases\\UserProfileController\\userprofile.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return user profile when username is found&quot;,&quot;fullTitle&quot;:&quot;getUserProfile function should return user profile when username is found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const fakeUser = {\n    firstname: &#x27;John&#x27;,\n    lastname: &#x27;Doe&#x27;,\n    username: &#x27;johndoe&#x27;,\n    email: &#x27;john@example.com&#x27;,\n    phone: &#x27;1234567890&#x27;,\n    cart: [],\n};\nconst req = { query: { username: &#x27;johndoe&#x27; } };\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\nsinon.stub(User, &#x27;findOne&#x27;).resolves(fakeUser);\nawait getUserProfile(req, res);\nexpect(res.status.calledWith(200)).to.be.true;\nexpect(res.json.calledWith({\n    firstname: &#x27;John&#x27;,\n    lastname: &#x27;Doe&#x27;,\n    username: &#x27;johndoe&#x27;,\n    email: &#x27;john@example.com&#x27;,\n    phone: &#x27;1234567890&#x27;,\n    cart: [],\n})).to.be.true;\nUser.findOne.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60cc7404-903d-47ab-91ad-fdeea21b0a6b&quot;,&quot;parentUUID&quot;:&quot;5aecd9f4-e96f-4a2f-9773-a44dd9dc8aae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 400 if username is missing&quot;,&quot;fullTitle&quot;:&quot;getUserProfile function should return 400 if username is missing&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { query: {} }; // Missing username\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nawait getUserProfile(req, res);\n    \nexpect(res.status.calledWith(400)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Username is required&#x27; })).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;264b3905-310c-4e71-a105-8edd9783605c&quot;,&quot;parentUUID&quot;:&quot;5aecd9f4-e96f-4a2f-9773-a44dd9dc8aae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 404 if user is not found&quot;,&quot;fullTitle&quot;:&quot;getUserProfile function should return 404 if user is not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { query: { username: &#x27;nonexistentuser&#x27; } };\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(User, &#x27;findOne&#x27;).resolves(null); // No user found\n    \nawait getUserProfile(req, res);\n    \nexpect(res.status.calledWith(404)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;User not found&#x27; })).to.be.true;\n    \nUser.findOne.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a40f9789-b7fb-4090-ac6e-6ee8f42b4165&quot;,&quot;parentUUID&quot;:&quot;5aecd9f4-e96f-4a2f-9773-a44dd9dc8aae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return 500 if there is a server error&quot;,&quot;fullTitle&quot;:&quot;getUserProfile function should return 500 if there is a server error&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const req = { query: { username: &#x27;johndoe&#x27; } };\nconst res = { status: sinon.stub().returnsThis(), json: sinon.stub() };\n    \nsinon.stub(User, &#x27;findOne&#x27;).throws(new Error(&#x27;Database error&#x27;)); // Simulate DB error\n    \nawait getUserProfile(req, res);\n    \nexpect(res.status.calledWith(500)).to.be.true;\nexpect(res.json.calledWith({ message: &#x27;Server error&#x27; })).to.be.true;\n    \nUser.findOne.restore(); // Restore the original function&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c57e4c2-14bc-4026-b11b-6a72e786ee91&quot;,&quot;parentUUID&quot;:&quot;5aecd9f4-e96f-4a2f-9773-a44dd9dc8aae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;60cc7404-903d-47ab-91ad-fdeea21b0a6b&quot;,&quot;264b3905-310c-4e71-a105-8edd9783605c&quot;,&quot;a40f9789-b7fb-4090-ac6e-6ee8f42b4165&quot;,&quot;6c57e4c2-14bc-4026-b11b-6a72e786ee91&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.8.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportDir&quot;:&quot;unit_testing/Report&quot;,&quot;&quot;:true},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;unit_testing/Report&quot;,&quot;reportTitle&quot;:&quot;server&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;unit_testing\\Report\\assets&quot;,&quot;jsonFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\Report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;C:\\LABs\\Sem-5_SE_Project\\Project\\Software-Engineering-Project\\Codes\\server\\unit_testing\\Report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>